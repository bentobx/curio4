@import "base";

$gutter: modular-scale(2, 2em, $golden) !default;

body, html {
  margin: 0;
  padding: 0;
  height: 100%;
  position: relative;
}

h1 { @extend %h; }
h2 { @extend %sh; }
h3 { @extend %ssh; }
blockquote { @extend %bq; }
p { @extend %p; }
small { @extend %small; }

body {
  background-color: #FBF9F0;
  &> header {
    @include pad();
    @include omega();
    min-height: 560px;
    width: 100%;
    a {
      @extend %p;
      color: fade-out($white,.2);
      font-family: $sans-font-family;
      font-size: $base-font-size * .8;
      text-transform: uppercase;
      &:hover,&:active,&:focus { color: $white; }
    }
    .button {
      background-color: transparent;
      font-size: .7em;
    }
    .back,.members-area {
      @include span-columns(1 of 3);
      @include media('<=small') {
        display: none;
        a {
        }
      }
    }
    .logo {
      @include span-columns(1 of 3);
      img {
        @include media('<=small') {
          float: left;
        }
        display: block;
        margin: 0 auto;
        float: none;
        text-align: center;
      }
    }
    .my-account {
      @include span-columns(1 of 3);
      @include media('<=small') {
        @include shift(4);
      }
      .button { float: right; }
    }
    nav {
      .mobile-nav {
        @include media('>=large') {
          display: none;
        }
        @include media('<=medium') {
          display: block;
        }
      }
    }
  }
  main {
    section {
      @include pad(default);
      &.feature {
        @include pad(0);
        @include margin(2em 0);
        @include size(100% 300px);
        display: flex;
        align-items: center;
        justify-content: left;
        background-position: 50% 50%;
        background-size: cover;

        // Use if not including gradient in image source
        // background-image: linear-gradient(to right, $greyish-brown, rgba(0, 0, 0, 0.0));

        // Use if including image on page as an alternative; inline style is probably easier to manage
        // img { position: relative; z-index: 0; top: 50%; left: 50%; }
        .description {
          @include pad(default);
          height: auto;
          max-width: 70%;
          p {
            font-size: 1.75em;
            &.more {
              font-size: 1.25em;

              a {
                text-decoration: underline;
                color: fade-out($white,.2);
                &:hover,&:active,&:focus { color: $white; }
              }
            }
            &:last-child {
              margin: 0;
            }
          }
        }
        &#message-from-the-curator { color: #fff; }
      }
      &.strip {
        @include row();
        color: $white;
        background: url('../images/logo/mpc-logo-black-transparent.png') 50% 50% no-repeat $greyish-brown;
        h1 {
          line-height: 1;
          letter-spacing: -0.1px;
          font-variant: small-caps;
          font-weight: 100;
          font-size: 2em;
        }
        .description {
          text-align: center;
          line-height: 1.3em;
          font-size: 20px;
          font-weight: 400;
          width: 100%;

          p {
            color: $white-two;
            &:last-child { margin: 0; }
          }
        }
      }
    }
  }

  &.experience {
    // customize here for each experience, e.g.:
    &#the-king-in-yellow {
      &> header {
        @include retina-image('../images/header-image', cover, 'png', '../images/header-image@3x');
      }
    }
    &> header {
      background-position: 50% 50%;
      background-repeat: no-repeat;
      background-size: cover;
    }
    h1 {
      font-family: $heading-font-family;
      color: $white;
    }
    main {
      section {
        &.strip {
          .description {
            @include span-columns(6);
            @include media('<=medium') {
              @include span-columns(12);
            }
            // @include shift(3);
          }
          .prev-btn, .next-btn {
            @include span-columns(3);
            @include media('<=medium') {
              display: none;
            }
          }
        }
        &.copy-intro {
          @include outer-container;
          .copy {
            @include span-columns(8);
            @include media('<=medium') {
              @include span-columns(12);
            }
            .lead {
              font-weight: 900;
              letter-spacing: -0.2px;
              color: $greyish-brown;
              font-size: 24px;
            }
            :first-child {

              font-variant: small-caps;
              font-weight: 900;
              font-size: 36px;
              line-height: 1.1em;

            }
          }
          .purchase {
            @include span-columns(4);
            @include media('<=medium') {
              @include span-columns(12);
            }
            h4 {
              // font-family: $sans-font-family;
              // font-size: 20px;
              text-transform: uppercase;
              letter-spacing: -0.1px;
              color: $sienna;
              text-align: center;
            }
            .price {
              text-align: center;
              display: block;
              font-size: 32px;
              letter-spacing: -0.2px;
              color: #000;
              margin: 0 auto 20px;
            }
            .purchase-type {
              @include pad();
              @include row();
              color: $white;
              background-color: $greyish-brown;
              .button {
                @include span-columns(6);
                text-align: center;
              }
            }
          }
          .warning {
            @include pad(default);
            text-align: center;
            background: $tomato;

            // background: -webkit-linear-gradient($tomato-50, rgba(255, 0, 0, 0.0));
            // background: -o-linear-gradient($tomato-50, rgba(255, 0, 0, 0.0));
            // background: linear-gradient($tomato-50, rgba(255, 0, 0, 0.0));
            h4 {
              color: $white
            }
            p {
              font-size: 1.1em;
              letter-spacing: -0.1px;
              color: $white;
            }
          }
        }
        &.exp-particulars {
          @include row();
          h1 {
            color: $dark-slate-blue;
            font-weight: 100;
            text-transform: uppercase;
            text-align: center;
            border-color: lighten($dark-slate-blue,50%);
            border-bottom: dotted 1px;
            font-size: 1em;
            @include margin(0 auto 2px auto);
            @include pad(default);
            + ul {
              border-top: solid 2px;
              @include margin(2px 0 0 0);
              @include pad(14px 0 0 0);
              text-align: center;
              li {
                @include margin(0 0 .8em 0);
                &:last-child {
                  @include margin(0);
                }
              }
            }
          }
          div {
            @include span-columns(4);
            @include media('<=medium') {
              @include pad(0);
              @include margin(0 auto 1em auto);
              @include span-columns(12);
            }
            &.deliveries {
              ul {
                @include row();
                > :first-child {
                  @include shift(3);
                }
                li {
                  @include span-columns(3);
                  @include omega(4n);
                }
                .glyph {
                  width: 62px;
                  height: 50px;
                  object-fit: contain;
                  background-repeat: no-repeat;
                }
                .envelope { background-image: url(../images/deliveries-sprites/envelope@2x.png); }
                .crate { background-image: url(../images/deliveries-sprites/crate@2x.png); }
              }

            }
          }
        }
        &.interstitial {
          @include pad();
          margin-bottom: 30px;
          background: url("../images/header-image.png") no-repeat;
          background-size: cover;
          height: 400px;
        }
        &.copy-body {
          p:first-child {
            &::first-line {
              font-weight: 900;
            }
          }
          @include outer-container;
          figure {
            &.quote {
              @include pad();
              @include span-columns(4);
              @include media('<=medium') {
                @include pad(0);
                @include margin(0 auto 1em auto);
                text-align: center;
                @include span-columns(12);
              }
              blockquote {
                @include margin(0);
              }
              figcaption::before {
                content: "â€” ";
              }
              float: right;
            }
            font-style: italic;
            // font-family: $sans-font-family;
          }
        }
        &.spoilers {
          header {
            background: url("../images/logo/m-p-c-black-logo.png") no-repeat 50% 110px, linear-gradient($tomato-50, rgba(255, 0, 0, 0.0));
            text-align: center;
            text-transform: uppercase;
            margin-bottom: 20px;
            border-top: solid 3px $brick;
            border-bottom: solid 3px $brick;
            @include pad(4px 0);
            @include omega();
            h1 {
              line-height: 1;
            }
          }
          p { margin: 0; }
          @include pad(0);
          .spoiler-content {
            @include pad(default);
            padding-bottom: 150px;
            color: $brick;
            border-top: solid 1px $brick;
            border-bottom: solid 1px $brick;
          }
          .description {
            @include outer-container;
            @include pad(default);
          }
          li.mailing {
            img {
              @include fill-parent;
              width: 100%;
            }
            .caption {
              @include row();
              // color: shade($brick,20%);
              color: $dark-slate-blue;
              font-style: italic;
              text-align: center;
            }
          }
          h1,h2 {
            color: $brick;
          }
        }
      }
    }
  }
  &.home {
    // @extend .experience;
    &> header {
      // @include background-image(url("../images/home/valence-and-image") no-repeat 50% 50%);
      // @include retina-image('../images/home/valence-and-image', cover, 'png', '../images/home/valence-and-image@3x');
      background-position: 50% 50%;
      background-repeat: no-repeat;
      background-size: cover;

      video {
        position: fixed;
        top: 50%;
        left: 50%;
        min-width: 100%;
        min-height: 100%;
        width: auto;
        height: auto;
        z-index: -100;
        @include transform(translateX(-50%) translateY(-50%));
        @include background-image(url("../images/posters/MPC_EST_489_1600kbps.png") no-repeat 50% 50%);
        background-size: cover;
      }
    }

    @include media('<=medium') {
      &> header {
        @include background-image(url("../images/posters/MPC_EST_489_1600kbps.png") no-repeat 50% 50%);
        video {
          display: none;
        }
      }
    }

    &.strip {
      height: auto;
      display: -webkit-flex;
      display: flex;
      -webkit-align-items: center;
      align-items: center;
      @include pad(70px 0)
      @include media('<=large') {
        @include pad(50px 0)
      }
    }
    main {
      section {
        &.copy-body {
          @include outer-container;
          .block {
            @include span-columns(2 of 4);
            @include media('<=small') {
              @include span-columns(4 of 4);
              @include margin(2em 0);
            }
            a {
              text-decoration: underline;
              color: fade-out($white,.2);
              &:hover,&:active,&:focus { color: $white; }

            }
            h2 {
              text-align: center;
              font-variant: small-caps;
              font-weight: 900;
              letter-spacing: 1px;
            }
          }
        }
      }
    }
  }
}


.mysterious-key {
  width: 59px;
  height: 24px;
  background: url("../images/mysterious-key@2x.png") no-repeat 50% 50%;
  object-fit: contain;
  &.divider {
    @include margin(2em auto);
    @include row();
  }
}


.image-gradient-dynamic {
  $image-gradient-color-top: $sienna;
  $transparency-top: 0.8;
  $image-gradient-color-bottom: $black;
  $transparency-bottom: 0.4;
  $vertical-angle: 0deg;
  // $image-gradient-color-left: teal;
  // $transparency-left: 0.8;
  // $image-gradient-color-right: yellow;
  // $transparency-right: 0.8;
  // $horizontal-angle: 90deg;

  line-height: 0;
  position: relative;
  width: 100%;

  img {
    height: auto;
    left: 0;
    position: relative;
    top: 0;
    width: 100%;
  }

  .copy {
    left: 50%;
    width: 100%;
    margin: auto;
    position: absolute;
    text-align: center;
    top: 20%;
    transform: translate(-50%, -50%);
    z-index: 999;
    p {
      color: white;
      font-size: 1.75em;
      line-height: 1.2em;
      @include pad(default);
      position: relative;
    }
  }

  .overlay {
    @include position(absolute, 0);
    background-color: transparentize(
    $image-gradient-color-top,
    $transparency-top
    );
    background-image: linear-gradient($vertical-angle,
    transparentize($image-gradient-color-top, $transparency-top),
    transparentize($image-gradient-color-bottom, $transparency-bottom)
    );
    display: block;

    // &::after {
    //   @include position(absolute, 0);
    //   background-color: transparentize(
    //     $image-gradient-color-left,
    //     $transparency-right
    //   );
    //   background-image: linear-gradient($horizontal-angle,
    //     transparentize($image-gradient-color-left, $transparency-left),
    //     transparentize($image-gradient-color-right, $transparency-right)
    //   );
    //   content: "";
    //   display: block;
    // }
  }
}


footer {
  @include pad(default default 10em default);
  border-top: 1px solid fade-out($greyish-brown,.2);

  .terms-links {
    @include span-columns(1 of 2);
    a {
      @extend %p;
      color: $greyish-brown;
      font-family: $sans-font-family;
      font-size: $base-font-size * .8;
      text-transform: uppercase;
      text-decoration: underline;
      &:hover,&:active,&:focus { color: darken($purple-brown,.2); }
    }
  }
  .contact-links {
    @extend .mobile-footer;
    @include span-columns(1 of 2);
    .social {
      @include span-columns(2 of 3);
    }
    #footer-logo {
      @include span-columns(1 of 3);
    }
  }
}
